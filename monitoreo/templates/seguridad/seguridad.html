{% extends "basenueva.html"%}
{%load unslugify %}
{% load i18n %}
{% block extra_header %}
<script type="text/javascript" src="{{STATIC_URL}}js/highcharts.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/exporting.js"></script>
<script type="text/javascript">
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "% que consumen suficiente en verano/invierno carbohidrátos" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Plantano" %}',
                    '{% trans "Avena" %}',
                    '{% trans "Miel" %}',
                    '{% trans "Guineo" %}',
                    '{% trans "Malanga" %}',
                    '{% trans "Azucar" %}',
                    '{% trans "Sorgo" %}',
                    '{% trans "Papa" %}',
                    '{% trans "Quequisque" %}',
                    '{% trans "Yuca" %}',
                    '{% trans "Maiz" %}',
                    '{% trans "Millon" %}',
                    '{% trans "Arroz" %}'
                    
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes (%)" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
                column: {
                    groupPadding: 0,
                    pointPadding: 0.9,
                    borderWidth: 0
                },
                series: {
                    pointWidth: 22,
                    minPointLength : 1
                }
            },
            series: [
                {
                    name: '{% trans "Verano" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %} {{carbohidrato.platano.por_consumen}},{{carbohidrato.avena.por_consumen}},
                           {{carbohidrato.miel.por_consumen}},{{carbohidrato.guineo.por_consumen}},
                           {{carbohidrato.malanga.por_consumen}},{{carbohidrato.azucar.por_consumen}},
                           {{carbohidrato.sorgo.por_consumen}},{{carbohidrato.papa.por_consumen}},
                           {{carbohidrato.quequisque.por_consumen}},{{carbohidrato.yuca.por_consumen}},
                           {{carbohidrato.maiz.por_consumen}},{{carbohidrato.millon.por_consumen}},
                           {{carbohidrato.arroz.por_consumen}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                            {{carbohidrato.banana.por_consumen}},{{carbohidrato.oats.por_consumen}},
                           {{carbohidrato.honey.por_consumen}},{{carbohidrato.cooking_banana.por_consumen}},
                           {{carbohidrato.yam.por_consumen}},{{carbohidrato.sugar.por_consumen}},
                           {{carbohidrato.sorghum.por_consumen}},{{carbohidrato.potato.por_consumen}},
                           {{carbohidrato.colocasia.por_consumen}},{{carbohidrato.tapioca.por_consumen}},
                           {{carbohidrato.corn.por_consumen}},{{carbohidrato.millets.por_consumen}},
                           {{carbohidrato.rice.por_consumen}},
                           {%endif%}
                           ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
                },
                {
                    name: '{% trans "Invierno" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %} {{carbohidrato.platano.por_invierno}},{{carbohidrato.avena.por_invierno}},
                           {{carbohidrato.miel.por_invierno}},{{carbohidrato.guineo.por_invierno}},
                           {{carbohidrato.malanga.por_invierno}},{{carbohidrato.azucar.por_invierno}},
                           {{carbohidrato.sorgo.por_invierno}},{{carbohidrato.papa.por_invierno}},
                           {{carbohidrato.quequisque.por_invierno}},{{carbohidrato.yuca.por_invierno}},
                           {{carbohidrato.maiz.por_invierno}},{{carbohidrato.millon.por_invierno}},
                           {{carbohidrato.arroz.por_invierno}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                            {{carbohidrato.banana.por_invierno}},{{carbohidrato.oats.por_invierno}},
                           {{carbohidrato.honey.por_invierno}},{{carbohidrato.cooking_banana.por_invierno}},
                           {{carbohidrato.yam.por_invierno}},{{carbohidrato.sugar.por_invierno}},
                           {{carbohidrato.sorghum.por_invierno}},{{carbohidrato.potato.por_invierno}},
                           {{carbohidrato.colocasia.por_invierno}},{{carbohidrato.tapioca.por_invierno}},
                           {{carbohidrato.corn.por_invierno}},{{carbohidrato.millets.por_invierno}},
                           {{carbohidrato.rice.por_invierno}},
                           {%endif%}
                           ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 10px Verdana, sans-serif'
                                }
                                } 
                },

                ]
        });
    });
    
var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container1',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "% que consumen suficiente en verano/invierno de grasas" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Queso" %}',
                    '{% trans "Aceite" %}',
                    '{% trans "Cuajada" %}',
                    '{% trans "Crema" %}'                    
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes (%)" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
                column: {
                    groupPadding: 0,
                    pointPadding: 0.9,
                    borderWidth: 0
                },
                series: {
                    pointWidth: 22,
                    minPointLength : 1
                }
            },
            series: [
                {
                    name: '{% trans "Verano" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %} {{grasa.queso.por_consumen}},{{grasa.aceite.por_consumen}},
                           {{grasa.cuajada.por_consumen}},{{grasa.crema.por_consumen}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                           {{grasa.cheese.por_consumen}},{{grasa.oil.por_consumen}},
                           {{grasa.fresh_cheese.por_consumen}},{{grasa.cream.por_consumen}},
                            {%endif%}
                          ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
                },
                {
                    name: '{% trans "Invierno" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %} {{grasa.queso.por_invierno}},{{grasa.aceite.por_invierno}},
                           {{grasa.cuajada.por_invierno}},{{grasa.crema.por_invierno}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                           {{grasa.cheese.por_invierno}},{{grasa.oil.por_invierno}},
                           {{grasa.fresh_cheese.por_invierno}},{{grasa.cream.por_invierno}},{%endif%}
                          ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 10px Verdana, sans-serif'
                                }
                                } 
                },

                ]
        });
    });
    
var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container2',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "% que consumen suficiente en verano/invierno de minerales/vitaminas" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Café" %}',
                    '{% trans "Frutas" %}',
                    '{% trans "Verduras" %}'
                                      
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes (%)" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
                column: {
                    groupPadding: 0,
                    pointPadding: 0.9,
                    borderWidth: 0
                },
                series: {
                    pointWidth: 22,
                    minPointLength : 1
                }
            },
            series: [
                {
                    name: '{% trans "Verano" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %}{{minerales.cafe.por_consumen}},{{minerales.frutas.por_consumen}},
                           {{minerales.verdura.por_consumen}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                           {{minerales.coffee.por_consumen}},{{minerales.fruits.por_consumen}},
                           {{minerales.vegetables.por_consumen}},{%endif%}
                          ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
                },
                {
                    name: '{% trans "Invierno" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %} {{minerales.cafe.por_invierno}},{{minerales.frutas.por_invierno}},
                           {{minerales.verdura.por_invierno}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                           {{minerales.coffee.por_invierno}},{{minerales.fruits.por_invierno}},
                           {{minerales.vegetables.por_invierno}},{%endif%}
                          ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 10px Verdana, sans-serif'
                                }
                                } 
                },

                ]
        });
    });
    
var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container3',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "% que consumen suficiente en verano/invierno de proteinas" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Carne de res" %}',
                    '{% trans "Huevos" %}',
                    '{% trans "Carne de cerdo" %}',
                    '{% trans "Soya" %}',
                    '{% trans "Pollo" %}',
                    '{% trans "Leche" %}',
                    '{% trans "Frijol" %}'          
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes (%)" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
                column: {
                    groupPadding: 0,
                    pointPadding: 0.9,
                    borderWidth: 0
                },
                series: {
                    pointWidth: 22,
                    minPointLength : 1
                }
            },
            series: [
                {
                    name: '{% trans "Verano" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %} {{proteinas.carne_de_res.por_consumen}},{{proteinas.huevos.por_consumen}},
                           {{proteinas.carne_de_cerdo.por_consumen}},{{proteinas.soya.por_consumen}},
                           {{proteinas.pollo.por_consumen}},{{proteinas.leche.por_consumen}},
                           {{proteinas.frijol.por_consumen}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                           {{proteinas.beef.por_consumen}},{{proteinas.eggs.por_consumen}},
                           {{proteinas.pork.por_consumen}},{{proteinas.soybeans.por_consumen}},
                           {{proteinas.chicken.por_consumen}},{{proteinas.milk.por_consumen}},
                           {{proteinas.beans.por_consumen}},{%endif%}
                          ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
                },
                {
                    name: '{% trans "Invierno" %}',
                    data: [{%if LANGUAGE_CODE == 'es' %} {{proteinas.carne_de_res.por_invierno}},{{proteinas.huevos.por_invierno}},
                           {{proteinas.carne_de_cerdo.por_invierno}},{{proteinas.soya.por_invierno}},
                           {{proteinas.pollo.por_invierno}},{{proteinas.leche.por_invierno}},
                           {{proteinas.frijol.por_invierno}},{%endif%}
                           {%if LANGUAGE_CODE == 'en' %}
                            {{proteinas.beef.por_invierno}},{{proteinas.eggs.por_invierno}},
                           {{proteinas.pork.por_invierno}},{{proteinas.soybeans.por_invierno}},
                           {{proteinas.chicken.por_invierno}},{{proteinas.milk.por_invierno}},
                           {{proteinas.beans.por_invierno}},{%endif%}
                          ],
                   dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 10px Verdana, sans-serif'
                                }
                                } 
                },

                ]
        });
    });
    
var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container4',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "Cuanto tipo de alimentos producen por cada clase" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Opciones" %}'   
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Cantidad" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'';
                }
            },
            plotOptions: {
                column: {
                    groupPadding: 0,
                    pointPadding: 0.9,
                    borderWidth: 0
                },
                series: {
                    pointWidth: 44,
                    minPointLength : 1
                }
            },
            series: [{%for a in lista%}
            {%for k,v in a.items%}
                {   
                    name: '{{k}}',
                    data: [{{v}}],
                    dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '';
                                                  },
                        style: {
                            font: 'normal 10px Verdana, sans-serif'
                                }
                                }
                     
                },
           {%endfor%}
                {%endfor%}]
        });
    });
</script>
{% endblock %}
{% block barra %}
{%endblock%}
{% block content %}
{% include "filtros.html" %}
<div class="contenido fulltabla">
<div class="subindicador">{% trans "La Seguridad Alimentaria" %}
  {%if LANGUAGE_CODE == 'es' %}
        <a href="#" class="btn btn-mini exportar guardarXLS" onclick="exportarXLS('modalidad'); return false;"><img src="{{STATIC_URL}}img/excel.png"> Exportar</a>
    {%endif%}
    {%if LANGUAGE_CODE == 'en' %}
        <a href="#" class="btn btn-mini exportar guardarXLS" onclick="exportarXLS('modalidad'); return false;"><img src="{{STATIC_URL}}img/excel.png"> Export</a>
    {%endif%}
    </div>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container4"></div>
</div>

<div id="modalidad">
<table style="width:100%;">
    <caption>{% trans "Alimentos que contienen carbohidrátos" %}</caption>
        <thead>
            <tr>
                <th>{% trans "ALIMENTOS" %}</th>
                <th>{% trans "# de familias que producen" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que compran" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente verano" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente invierno" %}</th>
                <th>%</th>
            </tr>
        </thead>
        <tbody>
            {%for key, value in carbohidrato.items%}
            <tr>
                <td>{{key|unslugify}}</td>
                <td>{{value.producen|floatformat}}</td>
                <td>{{value.por_producen|floatformat}}</td>
                <td>{{value.compran|floatformat}}</td>
                <td>{{value.por_compran|floatformat}}</td>
                <td>{{value.consumen|floatformat}}</td>
                <td>{{value.por_consumen|floatformat}}</td>
                <td>{{value.invierno|floatformat}}</td>
                <td>{{value.por_invierno|floatformat}}</td>
            </tr>
            {%endfor%}
        </tbody>
    </table>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container"></div>
</div>
    <br></br>
<table style="width:100%;">
    <caption>{% trans "Alimentos que contienen grasas" %}</caption>
        <thead>
            <tr>
                <th>{% trans "ALIMENTOS" %}</th>
                <th>{% trans "# de familias que producen" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que compran" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente verano" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente invierno" %}</th>
                <th>%</th>
            </tr>
        </thead>
        <tbody>
            {%for key, value in grasa.items%}
            <tr>
                <td>{{key|unslugify}}</td>
                <td>{{value.producen|floatformat}}</td>
                <td>{{value.por_producen|floatformat}}</td>
                <td>{{value.compran|floatformat}}</td>
                <td>{{value.por_compran|floatformat}}</td>
                <td>{{value.consumen|floatformat}}</td>
                <td>{{value.por_consumen|floatformat}}</td>
                <td>{{value.invierno|floatformat}}</td>
                <td>{{value.por_invierno|floatformat}}</td>
            </tr>
            {%endfor%}
        </tbody>
    </table>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container1"></div>
</div>
    <br></br>
<table style="width:100%;">
    <caption>{% trans "Alimentos que contienen minerales/vitaminas" %}</caption>
        <thead>
            <tr>
                <th>{% trans "ALIMENTOS" %}</th>
                <th>{% trans "# de familias que producen" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que compran" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente verano" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente invierno" %}</th>
                <th>%</th>
            </tr>
        </thead>
        <tbody>
            {%for key, value in minerales.items%}
            <tr>
                <td>{{key|unslugify}}</td>
                <td>{{value.producen|floatformat}}</td>
                <td>{{value.por_producen|floatformat}}</td>
                <td>{{value.compran|floatformat}}</td>
                <td>{{value.por_compran|floatformat}}</td>
                <td>{{value.consumen|floatformat}}</td>
                <td>{{value.por_consumen|floatformat}}</td>
                <td>{{value.invierno|floatformat}}</td>
                <td>{{value.por_invierno|floatformat}}</td>
            </tr>
            {%endfor%}
        </tbody>
    </table>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container2"></div>
</div>
   <br></br> 
<table style="width:100%;">
    <caption>{% trans "Alimentos que contienen proteinas" %}</caption>
        <thead>
            <tr>
                <th>{% trans "ALIMENTOS" %}</th>
                <th>{% trans "# de familias que producen" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que compran" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente verano" %}</th>
                <th>%</th>
                <th>{% trans "# de familias que consumen suficiente invierno" %}</th>
                <th>%</th>
            </tr>
        </thead>
        <tbody>
            {%for key, value in proteinas.items%}
            <tr>
                <td>{{key|unslugify}}</td>
                <td>{{value.producen|floatformat}}</td>
                <td>{{value.por_producen|floatformat}}</td>
                <td>{{value.compran|floatformat}}</td>
                <td>{{value.por_compran|floatformat}}</td>
                <td>{{value.consumen|floatformat}}</td>
                <td>{{value.por_consumen|floatformat}}</td>
                <td>{{value.invierno|floatformat}}</td>
                <td>{{value.por_invierno|floatformat}}</td>
            </tr>
            {%endfor%}
        </tbody>
    </table> 
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container3"></div>
</div> 

</div>
<br></br>
</div>
<div class="clean"></div>
{% endblock %}
