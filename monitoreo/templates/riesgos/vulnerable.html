{% extends "basenueva.html" %}
{%load unslugify %}
{% load i18n %}
{%block extra_header%}
<script type="text/javascript" src="{{STATIC_URL}}js/highcharts.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/exporting.js"></script>
<script type="text/javascript">
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "Fenomenos naturales" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "sequia" %}',
                    '{% trans "inundacion" %}',
                    '{% trans "vientos" %}',
                    '{% trans "deslizamiento" %}'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes (%)" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
         column: {
            pointPadding: 0.2,
            borderWidth: 0
         }
      },
            series: [
            {
                name: '{% trans "año con año" %}',
                data: [{{sequia.0.2}},{{inundacion.0.2}},{{vientos.0.2}},{{deslizamiento.0.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                } 
            },
            {
                name: '{% trans "cada 5 años" %}',
                data: [{{sequia.1.2}},{{inundacion.1.2}},{{vientos.1.2}},{{deslizamiento.1.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "cada 10 años" %}',
                data: [{{sequia.2.2}},{{inundacion.2.2}},{{vientos.2.2}},{{deslizamiento.2.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "nunca" %}',
                data: [{{sequia.3.2}},{{inundacion.3.2}},{{vientos.3.2}},{{deslizamiento.3.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            }
            ]
        });
    });
    
var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container1',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "Razones agricolas" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Falta de semilla" %}',
                    '{% trans "Mala calidad de semilla" %}',
                    '{% trans "Plagas y enfermedades" %}'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes (%)" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
         column: {
            pointPadding: 0.2,
            borderWidth: 0
         }
      },
            series: [
            {
                name: '{% trans "año con año" %}',
                data: [{{falta_semilla.0.2}},{{mala_semilla.0.2}},{{plagas.0.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "cada 5 años" %}',
                data: [{{falta_semilla.1.2}},{{mala_semilla.1.2}},{{plagas.1.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "cada 10 años" %}',
                data: [{{falta_semilla.2.2}},{{mala_semilla.2.2}},{{plagas.2.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "nunca" %}',
                data: [{{falta_semilla.3.2}},{{mala_semilla.3.2}},{{plagas.3.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            }
            ]
        });
    });
    
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container2',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "Razones de mercado" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Bajo precio" %}',
                    '{% trans "Falta de venta" %}',
                    '{% trans "Estafa de contrato" %}',
                    '{% trans "Falta calidad de producto" %}'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes (%)" %}'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
         column: {
            pointPadding: 0.2,
            borderWidth: 0
         }
      },
            series: [
            {
                name: '{% trans "año con año" %}',
                data: [{{bajo_precio.0.2}},{{falta_venta.0.2}},{{estafa.0.2}},{{falta_calidad.0.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "cada 5 años" %}',
                data: [{{bajo_precio.1.2}},{{falta_venta.1.2}},{{estafa.1.2}},{{falta_calidad.1.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "cada 10 años" %}',
                data: [{{bajo_precio.2.2}},{{falta_venta.2.2}},{{estafa.2.2}},{{falta_calidad.2.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "nunca" %}',
                data: [{{bajo_precio.3.2}},{{falta_venta.3.2}},{{estafa.3.2}},{{falta_calidad.3.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            }
            ]
        });
    });
    
    
var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container3',
                defaultSeriesType: 'column'
            },
            title: {
                text: '{% trans "Inversión" %}'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                categories: [
                    '{% trans "Falta de crédito" %}',
                    '{% trans "Altos interés" %}'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: '{% trans "Porcentajes" %} (%)'
                }
            },
            
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'%';
                }
            },
            plotOptions: {
         column: {
            pointPadding: 0.2,
            borderWidth: 0
         }
      },
            series: [
            {
                name: '{% trans "año con año" %}',
                data: [{{falta_credito.0.2}},{{alto_interes.0.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "cada 5 años" %}',
                data: [{{falta_credito.1.2}},{{alto_interes.1.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "cada 10 años" %}',
                data: [{{falta_credito.2.2}},{{alto_interes.2.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            },
            {
                name: '{% trans "nunca" %}',
                data: [{{falta_credito.3.2}},{{alto_interes.3.2}}],
                dataLabels: {
                        enabled: true,
                        rotation: 0,
                        color: '#632D00',
                        align: 'center',
                        x: -3,
                        y: 0,
                            formatter: function() {
                                return this.y + '%';
                                                  },
                        style: {
                            font: 'normal 8px Verdana, sans-serif'
                                }
                                }  
            }
            ]
        });
    });
</script>    


    <script type="text/javascript">
    $(document).ready(function() {
        $(".vulnerable").addClass("activa");
    });
    </script>
{%endblock%}
{% block barra %}
<div class="indicadores">
	{% include "nav_riesgos.html" %}
</div>
{% endblock %}
{% block content %}

{% include "filtros.html" %}
<div class="contenido fulltabla">
	<div class="subindicador">{% trans "RIESGO" %} &raquo; {% trans "Vulnerabilidades de las fincas" %}
    {%if LANGUAGE_CODE == 'es' %}
        <a href="#" class="btn btn-mini exportar guardarXLS" onclick="exportarXLS('modalidad'); return false;"><img src="{{STATIC_URL}}img/excel.png"> Exportar</a>
    {%endif%}
    {%if LANGUAGE_CODE == 'en' %}
        <a href="#" class="btn btn-mini exportar guardarXLS" onclick="exportarXLS('modalidad'); return false;"><img src="{{STATIC_URL}}img/excel.png"> Export</a>
    {%endif%}
    </div>
	
<div id="modalidad">
	
<table width="100%">
        <thead>
        <caption>{% trans "Fenomenos naturales" %}</caption>
            <tr>
                <th>{% trans "Causa" %}</th>
                <th>{% trans "Años con años" %}</th>
                <th>{% trans "Cada 5 año" %}s</th>
                <th>{% trans "Cada 10 años" %}</th>
                <th>{% trans "Nunca" %}</th>
                <th>Total</th>
               
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{% trans "Sequía" %}</td>
                {%for a in sequia%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_sequia}}</td>
            </tr>
            <tr>
                <td>{% trans "Inundación" %}</td>
                {%for a in inundacion%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_inundacion}}</td>
            </tr>
            <tr>
                <td>{% trans "Vientos" %}</td>
                {%for a in vientos%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_vientos}}</td>
            </tr>
            <tr>
                <td>{% trans "Deslizamiento" %}</td>
                {%for a in deslizamiento%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_deslizamiento}}</td>
            </tr>
        </tbody>
</table>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container"></div>
</div>
<br>
<table width="100%">
        <thead>
        <caption>{% trans "Razones agrícolas" %}</caption>
            <tr>
                <th>{% trans "Causa" %}</th>
                <th>{% trans "Años con años" %}</th>
                <th>{% trans "Cada 5 años" %}</th>
                <th>{% trans "Cada 10 años" %}</th>
                <th>{% trans "Nunca" %}</th>
                <th>Total</th>
               
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{% trans "Falta de semilla" %}</td>
                {%for a in falta_semilla%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_falta_semilla}}</td>
            </tr>
            <tr>
                <td>{% trans "Mala calidad de semilla" %}</td>
                {%for a in mala_semilla%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_mala_semilla}}</td>
            </tr>
            <tr>
                <td>{% trans "Plagas y enfermedades" %}</td>
                {%for a in plagas%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_plagas}}</td>
            </tr>
        </tbody>
</table>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container1"></div>
</div>
<br>
<table width="100%">
        <thead>
        <caption>{% trans "Razones de mercados" %}</caption>
            <tr>
                <th>{% trans "Causa" %}</th>
                <th>{% trans "Años con años" %}</th>
                <th>{% trans "Cada 5 años" %}</th>
                <th>{% trans "Cada 10 años" %}</th>
                <th>{% trans "Nunca" %}</th>
                <th>Total</th>
               
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{% trans "Bajo precio" %}</td>
                {%for a in bajo_precio%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_bajo_precio}}</td>
            </tr>
            <tr>
                <td>{% trans "Falta de venta" %}</td>
                {%for a in falta_venta%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_falta_venta}}</td>
            </tr>
            <tr>
                <td>{% trans "Estafa de contrato" %}</td>
                {%for a in estafa%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_estafa}}</td>
            </tr>
            <tr>
                <td>{% trans "Falta calidad de producto" %}</td>
                {%for a in falta_calidad%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_falta_calidad}}</td>
            </tr>
        </tbody>
</table>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container2"></div>
</div>
<br>
<table width="100%">
        <thead>
        <caption>{% trans "Inversión" %}</caption>
            <tr>
                <th>{% trans "Causa" %}</th>
                <th>{% trans "Años con años" %}</th>
                <th>{% trans "Cada 5 años" %}</th>
                <th>{% trans "Cada 10 años" %}</th>
                <th>{% trans "Nunca" %}</th>
                <th>Total</th>
               
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{% trans "Falta de crédito" %}</td>
                {%for a in falta_credito%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_falta_credito}}</td>
            </tr>
            <tr>
                <td>{% trans "Altos interés" %}</td>
                {%for a in alto_interes%}  
                    <td>
                        {{a.1}}       
                    </td>
                {%endfor%}
                <td>{{total_alto_interes}}</td>
            </tr>
        </tbody>
</table>
<div class="contenedor">
        <div class="grafico-title"></div>
        <div id="container3"></div>
</div>
</div>
</div>
<div class="clean"></div>
<br></br>
{% endblock %}
